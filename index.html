<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Projeto EstaÃ§Ã£o MeteorolÃ³gica</title>
  <link rel="stylesheet" href="estilo.css">
</head>
<body>
  <header>
    <h1>EstaÃ§Ã£o MeteorolÃ³gica Escolar</h1>
    <h1>PÃ¡gina em Desenvolvimento</h1>
    <p>Monitorando temperatura, umidade e outros dados climÃ¡ticos</p>
  </header>

  <nav>
    <ul>
      <li><a href="#dados-atuais">Dados Atuais</a></li>
      <li><a href="#historico">HistÃ³rico</a></li>
      <li><a href="#sobre">Sobre o Projeto</a></li>
    </ul>
  </nav>

  <main>
    <section id="dados-atuais">
      <h2>Dados Atuais</h2>
      <div class="cards" id="dados-atuais-container">
        <p>Carregando dados...</p>
      </div>
    </section>

    <section id="historico">
      <h2>HistÃ³rico de Leituras</h2>
      <table border="1">
        <thead>
          <tr>
            <th>DataHora</th>
            <th>Temperatura (Â°C)</th>
            <th>Umidade (%)</th>
            <th>PressÃ£o (hPa)</th>
            <th>PressÃ£o NÃ­vel do Mar (hPa)</th>
            <th>Ponto de Orvalho (Â°C)</th>
          </tr>
        </thead>
        <tbody id="historico-body">
          <!-- Preenchido pelo JavaScript -->
        </tbody>
      </table>
    </section>

    <section id="sobre">
      <h2>Sobre o Projeto</h2>
      <p>Este projeto escolar visa monitorar e registrar dados meteorolÃ³gicos de forma prÃ¡tica, utilizando sensores de temperatura, umidade e pressÃ£o atmosfÃ©rica. As informaÃ§Ãµes coletadas ajudam a entender melhor o clima local e aprender sobre tecnologia e ciÃªncia de dados.</p>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Projeto Escolar - EstaÃ§Ã£o MeteorolÃ³gica</p>
  </footer>

  <script>
    const channelID = 3022907; 
    const url = `https://api.thingspeak.com/channels/${channelID}/feeds.json?results=10`;

    async function carregarDados() {
      try {
        const resposta = await fetch(url);
        const dados = await resposta.json();

        // Ãšltima leitura
        const ultimo = dados.feeds[dados.feeds.length - 1];

        document.getElementById("dados-atuais-container").innerHTML = `
          <div>
            <h3>ğŸ“… ${ultimo.created_at}</h3>
            <p>ğŸŒ¡ï¸ Temperatura: ${ultimo.field2} Â°C</p>
            <p>ğŸ’§ Umidade: ${ultimo.field3} %</p>
            <p>â²ï¸ PressÃ£o: ${ultimo.field4} hPa</p>
            <p>ğŸŒŠ PressÃ£o NÃ­vel do Mar: ${ultimo.field5} hPa</p>
            <p>ğŸŒ«ï¸ Ponto de Orvalho: ${ultimo.field6} Â°C</p>
          </div>
        `;

        // Preenche histÃ³rico
        let linhas = "";
        dados.feeds.forEach(feed => {
          linhas += `
            <tr>
              <td>${feed.created_at}</td>
              <td>${feed.field2}</td>
              <td>${feed.field3}</td>
              <td>${feed.field4}</td>
              <td>${feed.field5}</td>
              <td>${feed.field6}</td>
            </tr>
          `;
        });
        document.getElementById("historico-body").innerHTML = linhas;

      } catch (erro) {
        console.error("Erro ao carregar dados:", erro);
        document.getElementById("dados-atuais-container").innerHTML = "<p>âš ï¸ Erro ao carregar dados</p>";
      }
    }

    // Carrega os dados ao abrir a pÃ¡gina
    carregarDados();

    // Atualiza a cada 60 segundos
    setInterval(carregarDados, 60000);
  </script>
</body>
</html>
